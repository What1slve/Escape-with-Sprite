(()=>{const e=document.getElementById("gameCanvas"),t=e.getContext("2d"),o=new Image;o.src="img/dino.png";const n=new Image;n.src="img/dinorun.png";const i=new Image;i.src="img/dinorun1.png";const a=new Image;a.src="img/dinoduck.png";const r=new Image;r.src="img/dinoduck1.png";const s=new Image;s.src="img/dinoJump.png";const d=new Image;d.src="img/cactusBig.png";const c=new Image;c.src="img/cactusSmall.png";const g=new Image;g.src="img/cactusSmallMany.png";const l=new Image;l.src="img/bird.png";const h=new Image;h.src="img/bird2.png";const m=new Image;m.src="img/ground.png";const w=new Image;w.src="img/cloud.png";const u=document.getElementById("startButton"),y=document.getElementById("restartButton"),f=275;let p={x:50,y:f,defaultWidth:50,defaultHeight:65,duckWidth:27,duckHeight:35,vy:0,gravity:.6,jumpPower:-14,isJumping:!1,isDucking:!1},x=[],I=[{x:0,y:320},{x:800,y:320}],k=[{x:400,y:60},{x:150,y:80},{x:650,y:110}],v=0,P=!1,E=!1,S=5,D=0,M=0,B=0,A=performance.now();const C=1e3/60;function H(){if(!E)return t.clearRect(0,0,e.width,e.height),I.forEach((e=>{t.drawImage(m,e.x,e.y,800,80)})),k.forEach((e=>{t.drawImage(w,e.x,e.y,50,30)})),void t.drawImage(o,p.x,p.y,p.defaultWidth,p.defaultHeight);const J=performance.now(),F=(J-A)/C;if(A=J,!P){p.vy+=p.gravity*F,p.y+=p.vy*F,p.y>f&&(p.y=f,p.vy=0,p.isJumping=!1),p.isDucking&&!p.isJumping?(p.width=p.duckWidth,p.height=p.duckHeight,p.y=f+(p.defaultHeight-p.duckHeight)):(p.width=p.defaultWidth,p.height=p.defaultHeight),x.forEach((e=>{e.x-=S*F})),x=x.filter((e=>e.x>-e.width)),v+=.1*F,S=5+.5*Math.floor(v/20),p.gravity=.6+.05*Math.floor(v/20),p.jumpPower=-.22*Math.floor(v/20)-14;let e=Math.max(500,1500-20*Math.floor(v/20));if(Date.now()-D>e&&Math.random()<.02){const e=Math.random();let t;t=e<.15?{x:800,y:248-100*Math.random(),width:65,height:65,type:"bird"}:e<.33?{x:800,y:215+p.defaultHeight,width:30,height:60,type:"cactusBig"}:e<.66?{x:800,y:242+p.defaultHeight,width:30,height:33,type:"cactusSmall"}:{x:800,y:235+p.defaultHeight,width:70,height:40,type:"cactusSmallMany"},x.push(t),D=Date.now()}I.forEach((e=>{e.x-=S*F,e.x<=-800&&(e.x+=1600)})),k.forEach((e=>{e.x-=S/2*F,e.x<=-50&&(e.x+=900)})),M+=F,p.isJumping||Math.floor(M)%10!=0||(B=(B+1)%2),x.forEach((e=>{p.x<e.x+e.width&&p.x+p.width>e.x&&p.y<e.y+e.height&&p.y+p.height>e.y&&(P=!0)}))}let b;t.clearRect(0,0,e.width,e.height),I.forEach((e=>{t.drawImage(m,e.x,e.y,800,80)})),k.forEach((e=>{t.drawImage(w,e.x,e.y,50,30)})),b=p.isJumping?s:p.isDucking?0===B?a:r:0===B?n:i,t.drawImage(b,p.x,p.y,p.width,p.height),x.forEach((e=>{let o;o="bird"===e.type?Math.floor(M)%20<10?l:h:"cactusBig"===e.type?d:"cactusSmall"===e.type?c:g,t.drawImage(o,e.x,e.y,e.width,e.height)})),t.font='20px "Roboto Condensed", sans-serif',t.textAlign="right";const O=t.createLinearGradient(700,0,700,30);if(O.addColorStop(0,"#FFD700"),O.addColorStop(1,"#FFA500"),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=4,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillStyle=O,t.strokeStyle="#333",t.lineWidth=.5,t.fillText(`Score: ${Math.floor(v)}`,700,30),t.strokeText(`Score: ${Math.floor(v)}`,700,30),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,P){t.save(),t.font='40px "Impact", sans-serif',t.textAlign="center";const e=t.createLinearGradient(300,150,300,200);e.addColorStop(0,"#FF0000"),e.addColorStop(1,"#8B0000"),t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=8,t.shadowOffsetX=4,t.shadowOffsetY=4,t.fillStyle=e,t.strokeStyle="#000",t.lineWidth=1,t.fillText("Game Over",400,180),t.strokeText("Game Over",400,180),t.restore(),y.style.display="block",u.style.display="none"}else y.style.display="none",u.style.display="none";t.textAlign="start",E&&requestAnimationFrame(H)}u.addEventListener("click",(function(){E||(E=!0,A=performance.now(),D=Date.now(),u.style.display="none",requestAnimationFrame(H))})),y.addEventListener("click",(()=>{P&&(p.y=f,p.vy=0,p.isJumping=!1,p.isDucking=!1,x=[],v=0,P=!1,S=5,D=Date.now(),M=0,B=0,E=!0,y.style.display="none",u.style.display="none",requestAnimationFrame(H))})),document.addEventListener("keydown",(e=>{"Space"!==e.code&&"ArrowUp"!==e.code||P||p.isJumping||!E?"ArrowDown"!==e.code||P||p.isJumping||!E||(p.isDucking=!0):(p.vy=p.jumpPower,p.isJumping=!0,p.isDucking=!1)})),document.addEventListener("keyup",(e=>{"ArrowDown"===e.code&&!P&&E&&(p.isDucking=!1)})),Promise.all([new Promise((e=>o.onload=e)),new Promise((e=>n.onload=e)),new Promise((e=>i.onload=e)),new Promise((e=>s.onload=e)),new Promise((e=>a.onload=e)),new Promise((e=>r.onload=e)),new Promise((e=>d.onload=e)),new Promise((e=>c.onload=e)),new Promise((e=>g.onload=e)),new Promise((e=>l.onload=e)),new Promise((e=>h.onload=e)),new Promise((e=>m.onload=e)),new Promise((e=>w.onload=e))]).then((()=>{H()}))})();