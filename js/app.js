(()=>{const e=document.getElementById("gameCanvas"),t=e.getContext("2d"),o=new Image;o.src="img/dino.png";const n=new Image;n.src="img/dinorun.png";const i=new Image;i.src="img/dinorun1.png";const a=new Image;a.src="img/dinoduck.png";const s=new Image;s.src="img/dinoduck1.png";const r=new Image;r.src="img/dinoJump.png";const d=new Image;d.src="img/cactusBig.png";const g=new Image;g.src="img/cactusSmall.png";const c=new Image;c.src="img/cactusSmallMany.png";const l=new Image;l.src="img/bird.png";const h=new Image;h.src="img/bird2.png";const m=new Image;m.src="img/ground.png";const w=new Image;w.src="img/cloud.png";const u=document.getElementById("restartButton"),y=275;let f={x:50,y,defaultWidth:50,defaultHeight:65,duckWidth:27,duckHeight:35,vy:0,gravity:.6,jumpPower:-14,isJumping:!1,isDucking:!1},p=[],x=[{x:0,y:320},{x:800,y:320}],k=[{x:400,y:60},{x:150,y:80},{x:650,y:110}],I=0,P=!1,v=5,S=0,M=0,D=0,E=performance.now();const B=1e3/60;function C(){const o=performance.now(),J=(o-E)/B;if(E=o,!P){f.vy+=f.gravity*J,f.y+=f.vy*J,f.y>y&&(f.y=y,f.vy=0,f.isJumping=!1),f.isDucking&&!f.isJumping?(f.width=f.duckWidth,f.height=f.duckHeight,f.y=y+(f.defaultHeight-f.duckHeight)):(f.width=f.defaultWidth,f.height=f.defaultHeight),p.forEach((e=>{e.x-=v*J})),p=p.filter((e=>e.x>-e.width)),I+=.1*J,v=5+.5*Math.floor(I/20),f.gravity=.6+.05*Math.floor(I/20),f.jumpPower=-.22*Math.floor(I/20)-14;let e=Math.max(500,1500-20*Math.floor(I/20));if(Date.now()-S>e&&Math.random()<.02){const e=Math.random();let t;t=e<.15?{x:800,y:248-100*Math.random(),width:65,height:65,type:"bird"}:e<.33?{x:800,y:215+f.defaultHeight,width:30,height:60,type:"cactusBig"}:e<.66?{x:800,y:242+f.defaultHeight,width:30,height:33,type:"cactusSmall"}:{x:800,y:235+f.defaultHeight,width:70,height:40,type:"cactusSmallMany"},p.push(t),S=Date.now()}x.forEach((e=>{e.x-=v*J,e.x<=-800&&(e.x+=1600)})),k.forEach((e=>{e.x-=v/2*J,e.x<=-50&&(e.x+=900)})),M+=J,f.isJumping||Math.floor(M)%10!=0||(D=(D+1)%2),p.forEach((e=>{f.x<e.x+e.width&&f.x+f.width>e.x&&f.y<e.y+e.height&&f.y+f.height>e.y&&(P=!0)}))}let H;t.clearRect(0,0,e.width,e.height),x.forEach((e=>{t.drawImage(m,e.x,e.y,800,80)})),k.forEach((e=>{t.drawImage(w,e.x,e.y,50,30)})),H=f.isJumping?r:f.isDucking?0===D?a:s:0===D?n:i,t.drawImage(H,f.x,f.y,f.width,f.height),p.forEach((e=>{let o;o="bird"===e.type?Math.floor(M)%20<10?l:h:"cactusBig"===e.type?d:"cactusSmall"===e.type?g:c,t.drawImage(o,e.x,e.y,e.width,e.height)})),t.font='20px "Roboto Condensed", sans-serif',t.textAlign="right";const b=t.createLinearGradient(700,0,700,30);if(b.addColorStop(0,"#FFD700"),b.addColorStop(1,"#FFA500"),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=4,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fillStyle=b,t.strokeStyle="#333",t.lineWidth=.5,t.fillText(`Score: ${Math.floor(I)}`,700,30),t.strokeText(`Score: ${Math.floor(I)}`,700,30),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,P){t.save(),t.font='40px "Impact", sans-serif',t.textAlign="center";const e=t.createLinearGradient(300,150,300,200);e.addColorStop(0,"#FF0000"),e.addColorStop(1,"#8B0000"),t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=8,t.shadowOffsetX=4,t.shadowOffsetY=4,t.fillStyle=e,t.strokeStyle="#000",t.lineWidth=1,t.fillText("Game Over",400,180),t.strokeText("Game Over",400,180),t.restore(),u.style.display="block"}else u.style.display="none";t.textAlign="start",requestAnimationFrame(C)}document.addEventListener("keydown",(e=>{"Space"!==e.code&&"ArrowUp"!==e.code||P||f.isJumping?"ArrowDown"!==e.code||P||f.isJumping||(f.isDucking=!0):(f.vy=f.jumpPower,f.isJumping=!0,f.isDucking=!1)})),u.addEventListener("click",(()=>{P&&(f.y=y,f.vy=0,f.isJumping=!1,f.isDucking=!1,p=[],I=0,P=!1,v=5,S=Date.now(),M=0,D=0,u.style.display="none")})),document.addEventListener("keyup",(e=>{"ArrowDown"!==e.code||P||(f.isDucking=!1)})),Promise.all([new Promise((e=>o.onload=e)),new Promise((e=>n.onload=e)),new Promise((e=>i.onload=e)),new Promise((e=>r.onload=e)),new Promise((e=>a.onload=e)),new Promise((e=>s.onload=e)),new Promise((e=>d.onload=e)),new Promise((e=>g.onload=e)),new Promise((e=>c.onload=e)),new Promise((e=>l.onload=e)),new Promise((e=>h.onload=e)),new Promise((e=>m.onload=e)),new Promise((e=>w.onload=e))]).then((()=>{C()}))})();